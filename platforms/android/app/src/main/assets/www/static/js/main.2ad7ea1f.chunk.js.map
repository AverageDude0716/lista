{"version":3,"sources":["App.js","index.js"],"names":["App","_useState","useState","_useState2","Object","slicedToArray","name","setName","_useState3","_useState4","guild","setGuild","_useState5","_useState6","section","setSection","lastResult","useEffect","Html5Qrcode","start","facingMode","fps","qrbox","text","result","parsed","qrcodeContent","splitted","split","parseResult","timeIn","Date","toLocaleTimeString","fetch","concat","method","headers","Content-Type","Authorization","body","JSON","stringify","requests","appendCells","rows","values","userEnteredValue","stringValue","fields","updateAttendance","errorMessage","console","log","catch","err","react_default","a","createElement","id","align","startApp","ReactDOM","createRoot","document","getElementById","render","src_App","window","cordova","addEventListener"],"mappings":"+KAqIeA,EA7HH,WACR,IAAAC,EACsBC,mBAAS,IAAGC,EAAAC,OAAAC,EAAA,EAAAD,CAAAH,EAAA,GAA7BK,EAAIH,EAAA,GAAEI,EAAOJ,EAAA,GAAAK,EACMN,mBAAS,IAAGO,EAAAL,OAAAC,EAAA,EAAAD,CAAAI,EAAA,GAA/BE,EAAKD,EAAA,GAAEE,EAAQF,EAAA,GAAAG,EACQV,mBAAS,IAAGW,EAAAT,OAAAC,EAAA,EAAAD,CAAAQ,EAAA,GAAnCE,EAAOD,EAAA,GAAEE,EAAUF,EAAA,GA4DpBG,EAAa,GAkCjB,OA/BAC,oBAAU,WACc,IAAIC,IAAY,UAIxBC,MAAM,CAAEC,WAAY,eAHjB,CAAEC,IAAK,GAAIC,MAAO,KAIjC,SAACC,EAAMC,GAEH,IAAIC,EApEM,SAACC,GACf,IAAIC,EAAWD,EAAcE,MAAM,SACnC,MAAO,CACHtB,KAAMqB,EAAS,GACfjB,MAAOiB,EAAS,GAChBb,QAASa,EAAS,IA+DLE,CAAYN,GAOzB,GALAhB,EAAQkB,EAAOnB,MACfK,EAASc,EAAOf,OAChBK,EAAWU,EAAOX,SAGdS,IAASP,EAAY,CACzBA,EAAaO,EACb,IAAIO,GAAS,IAAIC,MAAOC,sBApET,SAAC1B,EAAMI,EAAOI,EAASgB,GAC1CG,MAAK,iDAAAC,OAtBS,+CAsBsD,gBAAgB,CAChFC,OAAQ,OACRC,QAAS,CACLC,eAAgB,mBAEhBC,cAAa,UAAAJ,OAzBT,UA4BRK,KAAMC,KAAKC,UAAU,CACjBC,SAAY,CAAC,CACTC,YAAe,CACXC,KAAQ,CAAC,CACLC,OAAU,CACN,CAEIC,iBAAoB,CAChBC,YAAezC,IAGvB,CAEIwC,iBAAoB,CAChBC,YAAerC,IAGvB,CAEIoC,iBAAoB,CAChBC,YAAejC,IAGvB,CAEIgC,iBAAoB,CAChBC,YAAejB,OAK/BkB,OAAU,WA6BlBC,CAAiBxB,EAAOnB,KAAMmB,EAAOf,MAAOe,EAAOX,QAASgB,KAGpE,SAACoB,GAEGC,QAAQC,IAAIF,KACbG,MAAM,SAACC,GAENH,QAAQC,IAAIE,MAEjB,IAICC,EAAAC,EAAAC,cAAA,WAEIF,EAAAC,EAAAC,cAAA,OAAKC,GAAG,UAAQ,SAKhBH,EAAAC,EAAAC,cAAA,OAAKC,GAAG,WAERH,EAAAC,EAAAC,cAAA,WAAMF,EAAAC,EAAAC,cAAA,WAAMF,EAAAC,EAAAC,cAAA,WAIZF,EAAAC,EAAAC,cAAA,OAAKE,MAAM,UACPJ,EAAAC,EAAAC,cAAA,iCAEAF,EAAAC,EAAAC,cAAA,OAAKC,GAAG,uBACJH,EAAAC,EAAAC,cAAA,KAAGC,GAAG,QAAM,SAASpD,GACrBiD,EAAAC,EAAAC,cAAA,KAAGC,GAAG,SAAO,UAAUhD,GACvB6C,EAAAC,EAAAC,cAAA,KAAGC,GAAG,WAAS,YAAY5C,OCvHzC8C,EAAW,WACHC,IAASC,WAAWC,SAASC,eAAe,SACpDC,OAAOV,EAAAC,EAAAC,cAACS,EAAG,QAKdC,OAAOC,QACTL,SAASM,iBAAiB,cAAeT,GAAU,GAEnDA","file":"static/js/main.2ad7ea1f.chunk.js","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { Html5Qrcode } from \"html5-qrcode\";\n\nconst spreadsheetID = \"1BEdgdwItam2jOA9MGEhtexD3MqK21Y0mMxxBebvooO4\";\n// The access token changes every few minutes\nconst accessToken = \"TOKEN\";\n\n// Our main component\nconst App = () => {\n    // Name, guild, and section states that updates everytime QR Code is scanned\n    let [name, setName] = useState(\"\");\n    let [guild, setGuild] = useState(\"\");\n    let [section, setSection] = useState(\"\");\n\n    // Separate name, guild, and section and return it as different variables\n    let parseResult = (qrcodeContent) => {\n        let splitted = qrcodeContent.split(\" [|] \");  // QR Code content example: Dela Cruz, Juan A. [|] IREDOC [|] STEM1201\n        return {\n            name: splitted[0],\n            guild: splitted[1],\n            section: splitted[2]\n        }\n    }\n\n    let updateAttendance = (name, guild, section, timeIn) => {\n        fetch(`https://sheets.googleapis.com/v4/spreadsheets/${spreadsheetID}:batchUpdate`, {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\",\n                //update this token with yours.\n                Authorization: `Bearer ${accessToken}`,\n            },\n\n            body: JSON.stringify({\n                \"requests\": [{\n                    \"appendCells\": {\n                        \"rows\": [{\n                            \"values\": [\n                                {\n                                    // NAME\n                                    \"userEnteredValue\": {\n                                        \"stringValue\": name\n                                    }\n                                },\n                                {\n                                    // GUILD\n                                    \"userEnteredValue\": {\n                                        \"stringValue\": guild\n                                    }\n                                },\n                                {\n                                    // SECTION\n                                    \"userEnteredValue\": {\n                                        \"stringValue\": section\n                                    }\n                                },\n                                {\n                                    // TIME IN\n                                    \"userEnteredValue\": {\n                                        \"stringValue\": timeIn\n                                    }\n                                },\n                            ]\n                        }],\n                        \"fields\": \"*\"\n                    },\n                }]\n            })\n        })\n    }\n\n    // Variable to compare the last result to the recent QR code\n    let lastResult = \"\";\n\n    // useEffect() means if this component is rendered (shown to the user)\n    useEffect(() => {\n        const html5QrCode = new Html5Qrcode(\"reader\");  // Use the div with id 'reader' as our QR Code Reader\n        const config = { fps: 10, qrbox: 250};  //  QR Code Reader configurations\n\n        // Start reader using back camera\n        html5QrCode.start({ facingMode: \"environment\" }, config,\n        (text, result) => {\n            // Parse QR Code content and update our states\n            let parsed = parseResult(text);\n\n            setName(parsed.name);\n            setGuild(parsed.guild);\n            setSection(parsed.section);\n\n            //This conditions stops the application from updating the spreadsheet when showing the same QR code\n            if (text !== lastResult) {\n            lastResult = text;\n            let timeIn = new Date().toLocaleTimeString();\n                updateAttendance(parsed.name, parsed.guild, parsed.section, timeIn);\n            }\n        },\n        (errorMessage) => {\n            // If scan has error, this block will execute\n            console.log(errorMessage);\n        }).catch((err) => {\n            // This block will execute if the app has trouble starting the camera\n            console.log(err);\n        });\n    }, []);\n\n    // Render all visible parts of our app, place all (HTML) contents here\n    return (\n        <div>\n            {/* The topbar. We can add menu buttons and/or settings button here */}\n            <div id=\"topbar\">\n                Lista\n            </div>\n\n            {/* The camera. We don't need to touch this */}\n            <div id=\"reader\"></div>\n\n            <br /><br /><hr />\n\n            {/* Display QR Code content. This is a temporary proof of concept\n                QR Code content should be synced to google sheets */}\n            <div align=\"center\">\n                <h2>Student Information</h2>\n\n                <div id=\"student-information\">\n                    <p id=\"name\">Name: { name }</p>\n                    <p id=\"guild\">Guild: { guild }</p>\n                    <p id=\"section\">Section: { section }</p>\n                </div>\n            </div>\n        </div>\n    )\n};\n\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport './index.css';\nimport App from './App';\n\n// Don't make any changes here! This script just initializes our main component and starts it\n\nconst startApp = () => {\n\tconst root = ReactDOM.createRoot(document.getElementById('root'));\n\troot.render(<App />);\n};\n\n// Check if this is on Cordova Application then add an event listener for device ready first\n// Else just start the app\nif(window.cordova) {\n\tdocument.addEventListener('deviceready', startApp, false);\n} else {\n\tstartApp();\n}\n"],"sourceRoot":""}